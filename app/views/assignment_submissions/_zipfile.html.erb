<div class="row">
  <div class="col-xs-8 col-xs-offset-2">
    <p><%= link_to "Download submission", assignment_submission_zip_url(submission.assignment_id, submission),
                :class=>"btn btn-default btn-sm" %> </p>
    <h3>Files</h3>
      <div id="list-of-all" class="panel-collapse panel-body">
        <% contents = submission.all_zip_contents %>
        <% if contents.empty? %>
          <p>It looks like you didn't submit a valid zipfile, or we lost it on the server on Tuesday, April 1st. Try resubmitting?</p>
        <% else %>
          <p>If this looks wrong, try resubmitting.</p>
          <ul>
            <% submission.all_zip_contents.each do |filename| %>
              <li><%= filename %></li>
            <% end %>
          </ul>
        <% end %>
      </div>

  </div>
</div>

<div class="row">
  <div class="col-xs-10 col-xs-offset-1">

    <div class="panel-group" id="accordion">

    <% submission.submission_files.each do |file| %>
      <div class="panel panel-default">
        <div class="panel-heading">
          <p class="panel-title">
            <a data-toggle="collapse" data-parent="#accordion" href="#<%= file.name.hash %>">
                <%= file.name %> (<%= file.body.try(:length) || file.file_blob.length %> bytes)
            </a>
          </p>
        </div>
        <% if file.body %>
          <div id="<%= file.name.hash %>" class="panel-collapse panel-body collapse">

            <%= render :partial => "file", :locals => { :file => file } %>
          </div>
        <% else %>
          <div id="<%= file.name.hash %>" class="panel-collapse panel-body collapse">
            <%= link_to "Download file", file_serve_url(file) %>
          </div>
        <% end %>
      </div>
    <% end %>
    </div>
  </div>
</div>

